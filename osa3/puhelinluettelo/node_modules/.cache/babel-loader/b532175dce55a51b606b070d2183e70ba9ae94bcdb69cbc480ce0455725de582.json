{"ast":null,"code":"import _slicedToArray from\"/home/kasperka/Fullstackpalautukset/osa3/puhelinluettelo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import Filter from'./components/filterform.js';import PersonForm from'./components/personform.js';import PersonList from'./components/personlist.js';import numberService from'./services/numbers.js';import Notification from'./components/notification.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newFilter=_useState8[0],setNewFilter=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),notificationMessage=_useState10[0],setNotificationMessage=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),notificationType=_useState12[0],setNotificationType=_useState12[1];useEffect(function(){numberService.getAllNumbers().then(function(initialNumbers){return setPersons(initialNumbers);});},[]);var addNumber=function addNumber(event){event.preventDefault();var numberObject={name:newName,number:newNumber};var names=persons.map(function(person){return person.name;});if(names.includes(numberObject.name)){if(window.confirm(\"\".concat(numberObject.name,\" already exists in the phonebook, do you want to replace the number?\"))){changeNumber(numberObject);}else{return;}}else{numberService.addNewNumber(numberObject).then(function(returnedNumber){setPersons(persons.concat(returnedNumber));setNewNumber(\"\");setNewName(\"\");handleNotification(\"New number added succesfully!\",true);}).catch(function(error){console.log(error.response.data);var errorAsJson=JSON.stringify(error.response.data);console.log(errorAsJson);handleNotification(errorAsJson);});}};var changeNumber=function changeNumber(numberObject){var samePerson=persons.filter(function(person){return person.name===numberObject.name;});var id=samePerson[0].id;numberService.replaceNumber(id,numberObject).then(function(returnedPerson){setPersons(persons.map(function(person){return person.name!==numberObject.name?person:returnedPerson;}));setNewNumber(\"\");setNewName(\"\");handleNotification(\"Number replaced succesfully!\",true);}).catch(function(error){handleNotification(\"The number no longer exists on the server!\",false);setNewNumber(\"\");setNewName(\"\");setPersons(persons.filter(function(person){return person.id!==id;}));});};var deleteNumber=function deleteNumber(event){event.preventDefault();if(window.confirm(\"Are you sure you want to delete \".concat(event.target.name,\"?\"))){numberService.removeNumber(event.target.id).then(function(response){return numberService.getAllNumbers().then(function(numbers){setPersons(numbers);handleNotification(\"Number deleted succesfully!\",true);});});}else{return;}};var handleNotification=function handleNotification(message,type){setNotificationType(type);setNotificationMessage(message);setTimeout(function(){setNotificationType(type);setNotificationMessage(\"\");},5000);};var handleNewName=function handleNewName(event){setNewName(event.target.value);};var handleNewNumber=function handleNewNumber(event){setNewNumber(event.target.value);};var handleNewFilter=function handleNewFilter(event){setNewFilter(event.target.value);};var filteredPersons=persons.filter(function(person){return person.name.toLocaleLowerCase().includes(newFilter.toLowerCase());});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:notificationMessage,success:notificationType}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Filter,{newFilter:newFilter,handleNewFilter:handleNewFilter})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Add a new\"}),/*#__PURE__*/_jsx(PersonForm,{addNumber:addNumber,newName:newName,handleNewName:handleNewName,newNumber:newNumber,handleNewNumber:handleNewNumber}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(PersonList,{filteredPersons:filteredPersons,deleteNumber:deleteNumber})]});};export default App;","map":{"version":3,"names":["useEffect","useState","Filter","PersonForm","PersonList","numberService","Notification","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","notificationMessage","setNotificationMessage","notificationType","setNotificationType","getAllNumbers","then","initialNumbers","addNumber","event","preventDefault","numberObject","name","number","names","map","person","includes","window","confirm","changeNumber","addNewNumber","returnedNumber","concat","handleNotification","catch","error","console","log","response","data","errorAsJson","JSON","stringify","samePerson","filter","id","replaceNumber","returnedPerson","deleteNumber","target","removeNumber","numbers","message","type","setTimeout","handleNewName","value","handleNewNumber","handleNewFilter","filteredPersons","toLocaleLowerCase","toLowerCase"],"sources":["/home/kasperka/Fullstackpalautukset/osa3/puhelinluettelo/src/App.js"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport Filter from './components/filterform.js'\nimport PersonForm from './components/personform.js'\nimport PersonList from './components/personlist.js'\nimport numberService from './services/numbers.js'\nimport Notification from './components/notification.js'\n\nconst App = () => {\n  \n  const [persons, setPersons] = useState([])  \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [notificationMessage, setNotificationMessage] = useState(\"\")\n  const [notificationType, setNotificationType] = useState(true)\n\n  useEffect(() => {\n    numberService\n      .getAllNumbers()\n      .then(initialNumbers =>\n        setPersons(initialNumbers))\n    },[]\n    )\n\n  const addNumber = (event) => {\n    event.preventDefault()\n    const numberObject = {\n      name: newName,\n      number: newNumber\n    }\n    const names = persons.map(person => person.name)\n    if(names.includes(numberObject.name)){\n      if(window.confirm(`${numberObject.name} already exists in the phonebook, do you want to replace the number?`)){\n        changeNumber(numberObject)\n      }\n      else{\n        return\n      }\n    } \n    else{\n    \n    numberService\n    .addNewNumber(numberObject)\n    .then(returnedNumber => {\n      setPersons(persons.concat(returnedNumber))\n      setNewNumber(\"\")\n      setNewName(\"\")\n      handleNotification(\"New number added succesfully!\",true)\n    })\n    .catch(error => {\n      console.log(error.response.data)\n      const errorAsJson = JSON.stringify(error.response.data)\n      console.log(errorAsJson)\n      handleNotification(errorAsJson)\n    })\n    }\n  }\n\nconst changeNumber = (numberObject) =>{\n  const samePerson = persons.filter(person => person.name === numberObject.name)\n  const id = samePerson[0].id\n  numberService.replaceNumber(id, numberObject)\n  .then(returnedPerson => {\n    setPersons(persons.map(person => person.name !== numberObject.name ? person : returnedPerson))\n    setNewNumber(\"\")\n    setNewName(\"\")\n    handleNotification(\"Number replaced succesfully!\",true)\n    })\n  .catch(error =>{\n    handleNotification(\"The number no longer exists on the server!\", false)\n    setNewNumber(\"\")\n    setNewName(\"\")\n    setPersons(persons.filter(person => person.id !== id))\n    })\n}\n\n  const deleteNumber = (event) =>{\n    event.preventDefault()\n    if(window.confirm(`Are you sure you want to delete ${event.target.name}?`)){\n      numberService.removeNumber(event.target.id)\n      .then(response =>\n        numberService.getAllNumbers()\n        .then(numbers => {\n          setPersons(numbers)\n          handleNotification(\"Number deleted succesfully!\",true)\n          }\n          ))\n      \n    } else{\n      return\n    }\n\n  }\n\n  const handleNotification = (message, type) =>{\n    setNotificationType(type)\n    setNotificationMessage(message)\n    setTimeout(() =>{\n      setNotificationType(type)\n      setNotificationMessage(\"\")\n    },5000)\n  }\n\n  const handleNewName = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNewNumber = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleNewFilter = (event) => {\n    setNewFilter(event.target.value)\n  }\n\n  const filteredPersons = persons.filter(person => person.name.toLocaleLowerCase().includes(newFilter.toLowerCase()))\n  \n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notificationMessage} success = {notificationType} />\n      \n      <p>\n        <Filter \n        newFilter={newFilter} \n        handleNewFilter={handleNewFilter} \n        />\n      </p>\n      <h2>Add a new</h2>\n      \n      <PersonForm \n      addNumber={addNumber} \n      newName = {newName} \n      handleNewName = {handleNewName}\n      newNumber = {newNumber} \n      handleNewNumber = {handleNewNumber}\n      />\n\n      <h2>Numbers</h2>\n      <PersonList filteredPersons={filteredPersons} deleteNumber = {deleteNumber}/>\n    </div>\n  )\n\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}